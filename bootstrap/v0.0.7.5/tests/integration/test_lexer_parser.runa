Process called "test_complete_program_parsing" returns Integer:
    Let source be "Process called \"main\" takes argc as Integer returns Integer:\n    Let x be 42\n    Return x\nEnd Process"

    Let lexer be lexer_create(source)
    Let parser be parser_create(lexer)
    Let program be parser_parse_program(parser)

    # Verify program structure
    Let func_count be program_get_function_count(program)
    assert(func_count is equal to 1)

    Let main_func be program_get_function(program, 0)
    Let func_name be function_get_name(main_func)
    assert(string_equals(func_name, "main"))

    Let param_count be function_get_parameter_count(main_func)
    assert(param_count is equal to 1)

    program_destroy(program)
    parser_destroy(parser)
    lexer_destroy(lexer)
    Return 0
End Process