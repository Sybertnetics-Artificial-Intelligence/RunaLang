# Combined test for all v0.0.8 critical fixes
# Tests negative numbers, parentheses, "is not" comparisons, and imports together

Import "tests/unit/test_imports_helper.runa" as Math

Process called "main" takes argc as Integer, argv as Integer returns Integer:
    Display("Testing v0.0.8 Critical Fixes - Combined Test")

    # Test combining negative numbers with parentheses
    Let result1 be (-5 plus 10) multiplied by 2
    If result1 is equal to 10:
        Display("PASS: Negative numbers with parentheses")
    Otherwise:
        Display("FAIL: Negative numbers with parentheses")
    End If

    # Test "is not" with complex expression
    Let x be (15 minus 5) divided by 2
    If x is not greater than 10:
        Display("PASS: 'is not' with computed value")
    Otherwise:
        Display("FAIL: 'is not' with computed value")
    End If

    # Test imported function with negative numbers
    Let result2 be add(-10, 15)
    If result2 is equal to 5:
        Display("PASS: Imported function with negatives")
    Otherwise:
        Display("FAIL: Imported function with negatives")
    End If

    # Test imported function with parentheses
    Let a be (3 plus 2) multiplied by 4
    Let b be 10
    Let result3 be add(a, b)
    If result3 is equal to 30:
        Display("PASS: Imported function with parentheses")
    Otherwise:
        Display("FAIL: Imported function with parentheses")
    End If

    # Test complex expression: ((-5 + 3) * 2) with "is not" comparison
    Let complex be (-5 plus 3) multiplied by 2
    If complex is not equal to 0:
        Display("PASS: Complex negative/parens with 'is not'")
    Otherwise:
        Display("FAIL: Complex negative/parens with 'is not'")
    End If

    # Test nested parentheses with negatives
    Let nested be ((10 minus 20) plus 5) multiplied by -2
    If nested is equal to 10:
        Display("PASS: Nested parentheses with negatives")
    Otherwise:
        Display("FAIL: Nested parentheses with negatives")
    End If

    # Test imported recursive function with expression
    Let fact_input be (2 plus 3)
    Let factorial_result be factorial(fact_input)
    If factorial_result is equal to 120:
        Display("PASS: Imported recursive with parentheses")
    Otherwise:
        Display("FAIL: Imported recursive with parentheses")
    End If

    # Test "is not less than" with negative numbers
    Let neg1 be -5
    Let neg2 be -10
    If neg1 is not less than neg2:
        Display("PASS: 'is not' comparison with negatives")
    Otherwise:
        Display("FAIL: 'is not' comparison with negatives")
    End If

    Display("All combined tests complete")
    Return 0
End Process
