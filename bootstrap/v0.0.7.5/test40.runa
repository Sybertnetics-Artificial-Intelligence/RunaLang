# String Utilities for Runa v0.0.7.5 Bootstrap Compiler
# Refactored to work within v0.0.7.3 compiler limitations
# - No Character type (use Integer for ASCII values)
# - No complex boolean expressions in While loops
# - No function calls in conditions

# ==== Basic String Functions ====

Process called "string_length" takes str as Integer returns Integer:
    If str is equal to 0:
        Return 0
    End If
    Let len be 0
    Let continue_loop be 1
    While continue_loop is equal to 1:
        Let char be memory_get_byte(str, len)
        If char is equal to 0:
            Set continue_loop to 0
        Otherwise:
            Set len to len plus 1
        End If
    End While
    Return len
End Process

Process called "string_char_at" takes str as Integer, index as Integer returns Integer:
    If str is equal to 0:
        Return 0
    End If
    Let char be memory_get_byte(str, index)
    Return char
End Process

Process called "string_equals" takes str1 as Integer, str2 as Integer returns Integer:
    If str1 is equal to 0:
        If str2 is equal to 0:
            Return 1
        End If
        Return 0
    End If
