Note: Comprehensive ADT Test - Phases 1-5
Note: Tests multi-variant ADTs with proper tag assignment
Note: This is the critical test that failed before the bug fix

Type Option is:
    | None
    | Some with value as Integer
End Type

Type Shape is:
    | Circle with radius as Integer
    | Rectangle with width as Integer and height as Integer
End Type

Type Color is:
    | Red
    | Green
    | Blue
End Type

Process called "main" returns Integer:
    Note: Phase 1-2: Type definition and fieldless variants
    Let none_val be Option as None
    If none_val is equal to 0:
        Display "FAIL: None is null"
        Return 1
    End If

    Note: Phase 3: Single-field variant
    Let some_val be Option as Some with value as 42
    If some_val is equal to 0:
        Display "FAIL: Some is null"
        Return 1
    End If

    Note: Phase 4: Multi-field variant
    Let rect be Shape as Rectangle with width as 10 and height as 20
    If rect is equal to 0:
        Display "FAIL: Rectangle is null"
        Return 1
    End If

    Note: Phase 5: Explicit syntax with three variants (tests tag 0, 1, 2)
    Let red be Color as Red
    Let green be Color as Green
    Let blue be Color as Blue

    If red is equal to 0:
        Display "FAIL: Red is null"
        Return 1
    End If
    If green is equal to 0:
        Display "FAIL: Green is null"
        Return 1
    End If
    If blue is equal to 0:
        Display "FAIL: Blue is null"
        Return 1
    End If

    Note: All variants created successfully
    Return 0
End Process
