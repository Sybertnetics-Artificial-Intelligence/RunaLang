Note: Test Phase 11: Type Pattern Matching
Note: Type patterns check runtime type using "of type TypeName"

Type Option is:
    | None
    | Some with value as Integer
End Type

Process called "main" returns Integer:
    Note: Test 1: Match Integer type
    Let x be 42
    Match x:
        When value of Type Integer:
            Display "Matched Integer type"
        When _:
            Display "FAIL: Should have matched Integer"
            Return 1
    End Match

    Note: Test 2: Match variant type (pointer)
    Let y be Option as None
    Match y:
        When value of Type Integer:
            Display "FAIL: Should not match Integer for variant"
            Return 1
        When _:
            Display "Matched non-Integer type"
    End Match

    Note: Test 3: Mix type patterns with other patterns
    Let z be 100
    Match z:
        When 50:
            Display "FAIL: Matched 50"
            Return 1
        When value of Type Integer:
            Display "Matched Integer in mixed pattern"
        When _:
            Display "FAIL: Should have matched Integer type"
            Return 1
    End Match

    Display "All type pattern tests passed"
    Return 0
End Process
