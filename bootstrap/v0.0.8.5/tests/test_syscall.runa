Note: Test syscall primitives

Import "compiler/frontend/primitives/assembly/syscall.runa" as Syscall

Process called "main" returns Integer:
    Note: Test write syscall by printing "Hello from syscalls!\n"
    Let message be "Hello from syscalls!\n"
    Let message_len be 22

    Note: Get stdout file descriptor (1)
    Let stdout be 1

    Note: Get SYS_WRITE syscall number (1)
    Let sys_write be 1

    Note: Call generic syscall_3 directly
    Let result be syscall_3(sys_write, stdout, message, message_len)

    Note: Exit with success - call SYS_EXIT (60) directly
    Let sys_exit be 60
    Let exit_code be 0
    Let dummy2 be syscall_1(sys_exit, exit_code)

    Return 0
End Process
