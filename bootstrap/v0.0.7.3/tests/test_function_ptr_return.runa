# Test returning function pointers from functions

Process called "square" takes x as Integer returns Integer:
    Return x multiplied by x
End Process

Process called "cube" takes x as Integer returns Integer:
    Return x multiplied by x multiplied by x
End Process

Process called "identity" takes x as Integer returns Integer:
    Return x
End Process

Type UnaryOp is Pointer to Process takes n as Integer returns Integer

# Function that returns different function pointers
Process called "get_power_function" takes power as Integer returns UnaryOp:
    If power is equal to 1:
        Return identity
    End If
    If power is equal to 2:
        Return square
    End If
    Return cube
End Process

Process called "main" returns Integer:
    # Get function pointer for identity
    Let f1 be get_power_function(1)
    Let result1 be f1(5)
    Print result1  # Should print 5

    # Get function pointer for square
    Let f2 be get_power_function(2)
    Let result2 be f2(5)
    Print result2  # Should print 25

    # Get function pointer for cube
    Let f3 be get_power_function(3)
    Let result3 be f3(5)
    Print result3  # Should print 125

    Return 0
End Process