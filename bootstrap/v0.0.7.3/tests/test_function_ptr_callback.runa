# Function pointer callback test

Process called "is_even" takes n as Integer returns Integer:
    If n modulo by 2 is equal to 0:
        Return 1
    End If
    Return 0
End Process

Process called "is_positive" takes n as Integer returns Integer:
    If n is greater than 0:
        Return 1
    End If
    Return 0
End Process

Type IntPredicate is Pointer to Process takes value as Integer returns Integer

Process called "filter_and_count" takes test as IntPredicate returns Integer:
    Let count be 0
    Let i be 0 minus 5  # Start from -5

    While i is less than or equal to 10:
        If test(i) is equal to 1:
            Set count to count plus 1
        End If
        Set i to i plus 1
    End While

    Return count
End Process

Process called "main" returns Integer:
    # Count even numbers from -5 to 10
    Let even_count be filter_and_count(is_even)
    Print even_count  # Should print 8 (evens: -4, -2, 0, 2, 4, 6, 8, 10)

    # Count positive numbers from -5 to 10
    Let positive_count be filter_and_count(is_positive)
    Print positive_count  # Should print 10 (positives: 1 through 10)

    Return 0
End Process