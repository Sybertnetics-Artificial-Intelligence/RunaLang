Note: TestExtractTokenFunction

Process called "extract_token_part" that takes token_data as String, part_index as Integer returns String:
    Note: ExtractTokenPart
    Let current_part be 0
    Let start_pos be 0
    Let i be 0
    Let token_length be length_of(token_data)

    While i is less than token_length:
        Let char_code be char_at(token_data, i)
        If char_code is equal to 124:
            If current_part is equal to part_index:
                Return substring(token_data, start_pos, i)
            End If
            Set current_part to current_part plus 1
            Set start_pos to i plus 1
        End If
        Set i to i plus 1
    End While

    If current_part is equal to part_index:
        Return substring(token_data, start_pos, token_length)
    End If
    Return ""
End Process

Process called "test_main":
    Note: TestExtractTokenPart
    Display "Testing extract_token_part function"

    Let test_token be "Integer|42|1|1"
    Display "Test token: Integer|42|1|1"

    Let part0 be extract_token_part(test_token, 0)
    Display "Part 0 (type): "
    Display part0

    Let part1 be extract_token_part(test_token, 1)
    Display "Part 1 (value): "
    Display part1

    Let part2 be extract_token_part(test_token, 2)
    Display "Part 2 (line): "
    Display part2

    Let part3 be extract_token_part(test_token, 3)
    Display "Part 3 (column): "
    Display part3

    Display "extract_token_part test complete"
End Process